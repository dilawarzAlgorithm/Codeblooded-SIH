<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CityBus - Real-time Bus Tracking</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="Real-time bus tracking for small cities">
    <meta name="theme-color" content="#2196F3">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ2l0eUJ1cyIsInNob3J0X25hbWUiOiJDaXR5QnVzIiwic3RhcnRfdXJsIjoiLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmZmZmZmYiLCJ0aGVtZV9jb2xvciI6IiMyMTk2RjMifQ==">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzIxOTZGMyIvPgo8cGF0aCBkPSJNOCA5SDI0VjIzSDgiIGZpbGw9IndoaXRlIiBzdHJva2U9IiMyMTk2RjMiIHN0cm9rZS13aWR0aD0iMiIvPgo8Y2lyY2xlIGN4PSIxMiIgY3k9IjI2IiByPSIyIiBmaWxsPSIjMjE5NkYzIi8+CjxjaXJjbGUgY3g9IjIwIiBjeT0iMjYiIHI9IjIiIGZpbGw9IiMyMTk2RjMiLz4KPC9zdmc+">
</head>
<body>
    <!-- App Shell -->
    <div id="app" class="app">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <div class="header-content">
                    <h1 class="app-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="7" cy="19" r="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="17" cy="19" r="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        CityBus
                    </h1>
                    <div class="header-actions">
                        <button class="btn btn--sm btn--outline" id="location-btn" aria-label="Get current location">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <circle cx="12" cy="12" r="3" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Views -->
        <main class="app-main">
            <!-- Home/Map View -->
            <div id="home-view" class="view active">
                <!-- Search Bar -->
                <div class="search-container">
                    <div class="container">
                        <div class="search-bar">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <input 
                                type="text" 
                                id="search-input" 
                                class="search-input" 
                                placeholder="Search stops or routes..."
                                autocomplete="off"
                            >
                            <button class="search-clear" id="search-clear" aria-label="Clear search">Ã—</button>
                        </div>
                        <div id="search-results" class="search-results hidden"></div>
                    </div>
                </div>

                <!-- Map Container -->
                <div class="map-container">
                    <div id="map" class="map"></div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <div class="legend-dot bus-dot"></div>
                            <span>Buses</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot stop-dot"></div>
                            <span>Bus Stops</span>
                        </div>
                    </div>
                </div>

                <!-- Nearby Stops -->
                <div class="nearby-section">
                    <div class="container">
                        <div class="section-header">
                            <h2>Nearby Stops</h2>
                            <button class="btn btn--sm btn--outline" id="refresh-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M21 12c0 5-4 9-9 9s-9-4-9-9 4-9 9-9c2.3 0 4.3.8 6 2.1" stroke="currentColor" stroke-width="2"/>
                                    <path d="M21 6v6h-6" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Refresh
                            </button>
                        </div>
                        <div id="nearby-stops" class="stops-grid"></div>
                    </div>
                </div>

                <!-- Favorites Section -->
                <div class="favorites-section">
                    <div class="container">
                        <h2>Favorites</h2>
                        <div id="favorites-list" class="favorites-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Stop Details View -->
            <div id="stop-view" class="view">
                <div class="container">
                    <div class="view-header">
                        <button class="btn btn--sm btn--outline back-btn" id="stop-back-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M19 12H5" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Back
                        </button>
                        <button class="btn btn--sm btn--outline" id="favorite-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                    <div id="stop-details" class="stop-details"></div>
                    <div id="stop-buses" class="buses-list"></div>
                </div>
            </div>

            <!-- Trip Tracking View -->
            <div id="tracking-view" class="view">
                <div class="container">
                    <div class="view-header">
                        <button class="btn btn--sm btn--outline back-btn" id="tracking-back-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M19 12H5" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Back
                        </button>
                        <button class="btn btn--sm btn--secondary" id="stop-tracking-btn">
                            Stop Tracking
                        </button>
                    </div>
                    <div id="tracking-info" class="tracking-info"></div>
                    <div id="tracking-map" class="tracking-map"></div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <div class="container">
                    <div class="view-header">
                        <button class="btn btn--sm btn--outline back-btn" id="settings-back-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M19 12H5" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Back
                        </button>
                    </div>
                    <div class="settings-content">
                        <div class="settings-group">
                            <h3>Notifications</h3>
                            <div class="setting-item">
                                <label class="setting-label">
                                    <input type="checkbox" id="notifications-toggle" checked>
                                    <span class="setting-text">Bus arrival alerts</span>
                                </label>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>Appearance</h3>
                            <div class="setting-item">
                                <label class="form-label">Theme</label>
                                <select id="theme-select" class="form-control">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                    <option value="auto">Auto</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>Data</h3>
                            <div class="setting-item">
                                <label class="form-label">Update Interval</label>
                                <select id="update-interval" class="form-control">
                                    <option value="30">30 seconds</option>
                                    <option value="60">1 minute</option>
                                    <option value="90">90 seconds</option>
                                </select>
                            </div>
                            <button class="btn btn--secondary btn--full-width" id="clear-favorites">
                                Clear All Favorites
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="home-view">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m0 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h3a1 1 0 001-1V10" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Home</span>
            </button>
            <button class="nav-item" data-view="search">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                    <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Search</span>
            </button>
            <button class="nav-item" data-view="tracking-view">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="3" fill="currentColor"/>
                </svg>
                <span>Track</span>
            </button>
            <button class="nav-item" data-view="settings-view">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="2"/>
                    <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Settings</span>
            </button>
        </nav>

        <!-- Loading Overlay -->
        <div id="loading" class="loading-overlay hidden">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container"></div>

        <!-- Offline Indicator -->
        <div id="offline-indicator" class="offline-indicator hidden">
            <div class="container">
                <div class="offline-content">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M1 9l11-7 11 7-11 7-11-7z" stroke="currentColor" stroke-width="2"/>
                        <path d="M1 17l11-7 11 7-11 7-11-7z" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 2v20" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Offline - Showing cached data</span>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
